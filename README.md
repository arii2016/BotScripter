# BotScripter
Hubot用対話スクリプトエディタ  
キーワードに反応して、回答を記憶しながら対話を行えるスクリプトの生成と編集を可能にする  
専用スクリプトフォーマットのみ対応


# 環境  
Windows10 64bitのみ確認  
Qt5.9.6で作成

## ファイル構造
　ConversationScripter  
　　L　botScripter.exe　→　本体  
　　L　scripts　→　デフォルトのスクリプト生成先  
　　L　その他　→　Qt関連のファイルやフォルダ


# How to use
## BotScripter.exeの画面  
![scripter_boot](https://user-images.githubusercontent.com/31835008/44894134-48b6bd00-ad29-11e8-966a-3f17b7df20b7.png)  
１：Scriptのパス    
　→　ターゲットになるスクリプトのパスが表示される  
２：Script検索ボタン  
　→　ダイアログを開いてスクリプトを指定するボタン  
３：Script読み込みボタン  
　→　ターゲットスクリプトを読み込んでシナリオを表示するボタン  
　　　ターゲットが見つからなかった・あるいは読み込み失敗した場合、シナリオ記述エリアには新しいシナリオが生成される  
４：キーワード入力  
　→　対話の開始のキーワードとなる単語を記入するエリア  
　　　キーワード記述方法は後程説明する  
５：シナリオ記述エリア  
　→　シナリオを記述するエリア  
　　　記述規則は後程説明する  
６：シナリオ解析ボタン  
　→　一定のルールにのっとって記述されたシナリオを解析し、分岐シナリオを追加するボタン  
　　　後程説明する  
７：保存ボタン  
　→　保存を行う  
　　　スクリプトのパスが間違っていた場合はスクリプト名を入力するダイアログが開き、Scriptsフォルダに保存される

例）  
![scripter_example](https://user-images.githubusercontent.com/31835008/44894510-10b07980-ad2b-11e8-9e82-84c19dfe0da9.png)  

## スクリプト作成手順概要
大きく分けて４ステップで構成
１．新規作成orスクリプト読み込み
２．キーワード設定
３．シナリオ作成
４．保存

### 新規作成or読み込み
新規作成したい場合は、”Scriptのパス”を消してから”Script読み込みボタン”を押す  
すでにあるスクリプトを編集したい場合は、”Script検索ボタン”で対象のスクリプトを選択した後”Script読み込みボタン”を押す    
下の図は新規作成した直後の様子  
![image](https://user-images.githubusercontent.com/31835008/44894557-4b1a1680-ad2b-11e8-9f85-1788d479ec7e.png)  

### キーワード設定
シナリオを呼び出すキーワードを設定する  
例えば”非接続になる”のような質問に対するシナリオを作る場合、キーワードになるのは”接続しない”や”非接続”になる  
お客さんによっては質問の仕方が異なるので、いくつかのパターンを作っておくのがいい  
また、ほかのスクリプトと同じキーワードが入ってしまうと両方のスクリプトが反応してしまうので、キーワードはなるべくユニークにするのがいい  
  
書き方のフォーマットは2通り  
組み合わせも可能  
And検索：　A&B　（&は半角）  
　　　意味　→　問い合わせの内容にAとB両方が含まれていれば反応する　  
　　　　　　　　AとBの順序は守られる  
　　　例）接続&ならな　→　”接続にならない”というワードにヒットする  
　　　　　接続&なりま　→　”接続になりません”というワードにヒットする  
　　　　　　　　　　　　　ともに”ならない接続”や”なりません接続”といった順序が変わったワードにはヒットしない  

Or検索：　A,B　（,は半角）
　　　意味　→　問い合わせの内容にAまたはBが含まれていれば反応する　   
　　　例）非接続,接続にならない　→　”非接続”、”接続にならない”どちらかのワードにヒットする  
　　　　　　　　　　　　　短い単語や、いろんなFAQが絡みそうな単語は使わない  
　　　　　　　　　　　　　Or検索のキーワードを指定するときはクリティカルな単語や文章にする  

実用例）接続異常に関するFAQのキーワード  
　　　　非接続,接続&ならな,接続＆なりませ,接続しませ  
　　　　→　”非接続”、”接続にならない”、”接続になりません”、”接続しません”などのワードにヒットする  
　　　　　　　
### シナリオ作成
新規作成またはスクリプト読み込みすると、シナリオ記述エリアに文章が書かれたノードが表示される  
（新規作成or読み込み　参照）  
文章エリアに、文章と分岐選択肢を書いて”Parseボタン”を押す、を繰り返していくのがシナリオ作成  
細かいやり方は以下の通り  

１．ノードにシナリオを書き、必ず一番最後の行に回答させたい選択肢を・（全角）区切りで書く  
![image](https://user-images.githubusercontent.com/31835008/44894899-e495f800-ad2c-11e8-80cb-18e1f92d32c4.png)  

２．Parseボタンを押す  
シナリオが解析され、・区切りで与えられた選択肢分のシナリオが新たに追加される
![image](https://user-images.githubusercontent.com/31835008/44894961-2a52c080-ad2d-11e8-8400-b7928d26207e.png)  

３．それぞれのシナリオを追記する  
![image](https://user-images.githubusercontent.com/31835008/44895378-0bedc480-ad2f-11e8-8b71-a74645f929fa.png)  

４．Parseボタンを押す  
![image](https://user-images.githubusercontent.com/31835008/44895392-1f992b00-ad2f-11e8-8b99-066d9b967221.png)  

５．３～４を必要なだけ繰り返す  
![image](https://user-images.githubusercontent.com/31835008/44896004-aa7b2500-ad31-11e8-9b9d-cf6eee61def6.png)  

### 保存
新規作成の場合は、保存ボタンを押してScript名を決める  
命名規則は”FAQ_概要_言語”  
![image](https://user-images.githubusercontent.com/31835008/44896257-89670400-ad32-11e8-965c-5346ed8bd61d.png)  
![image](https://user-images.githubusercontent.com/31835008/44896275-a1d71e80-ad32-11e8-8e0c-943ba4602bdb.png)  

保存に成功すれば下記ダイアログが出る  
失敗する場合はbotScripter.exeの階層にScriptsフォルダがない可能性が高い  
![image](https://user-images.githubusercontent.com/31835008/44896289-b4515800-ad32-11e8-8dbf-3fe2cac712b9.png)  

スクリプトを読み込んだ場合は、そのスクリプトに上書きされる